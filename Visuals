#include <iostream>
#include <string>
#include <vector>
#include <SFML/Graphics.hpp>
#include "textures.h"
using namespace std;

class Text {
public:
    void setText (sf::Text& text, sf::Font& font, const string& str, unsigned int characterSize, const sf::Color& fillColor) {
        text.setFont(font);
        text.setString(str);
        text.setCharacterSize(characterSize);
        text.setFillColor(fillColor);
    }
};

int main() {
    Text text;
    int width = 1500;
    int height = 1500;
    sf::RenderWindow window(sf::VideoMode(width, height), "Beat Builders");
    sf::Color lightGreen(162, 252, 162);

    sf::Font pixel;
    sf::Font semiBold;
    sf::Font otherPixel;

    pixel.loadFromFile("files/VPPixel-Simplified.otf");
    semiBold.loadFromFile("files/Panton-Trial-SemiBold.ttf");
    otherPixel.loadFromFile("files/Big Pixel demo.otf");

    sf::Text titleText;
    titleText.setFont(pixel);
    titleText.setString("Create Your Playlist!");
    titleText.setStyle(sf::Text::Underlined);
    titleText.setCharacterSize(90);
    titleText.setPosition(width / 2.0f + 50, height / 4.0f - 200);
    titleText.setFillColor(sf::Color::Black);

    sf::FloatRect titleRect = titleText.getLocalBounds();
    titleText.setOrigin(titleRect.left + titleRect.width/2.0f, titleRect.top  + titleRect.height/2.0f);

    sf::Text filterText;
    filterText.setFont(semiBold);
    filterText.setString("Filters");
    filterText.setCharacterSize(50);
    filterText.setPosition(width / 7.0f, height / 4.0f - 65);
    filterText.setFillColor(sf::Color::Black);

    sf::Text genreText;
    genreText.setFont(otherPixel);
    genreText.setString("Select Your Genre");
    genreText.setCharacterSize(50);
    genreText.setPosition(width / 3.0f - 50, height / 4.0f - 100);
    genreText.setFillColor(sf::Color::Black);

    vector<sf::Text> textBoxes;

    sf::Text darkTrap;
    text.setText(darkTrap, otherPixel, "Dark Trap", 40, sf::Color::Black);
    darkTrap.setPosition(width / 9.0f - 50, height / 4.0f + 10);
    textBoxes.push_back(darkTrap);

    sf::Text hipHop;
    text.setText(hipHop, otherPixel, "Hip-Hop", 40, sf::Color::Black);
    hipHop.setPosition(width / 3.0f, height / 4.0f + 10);
    textBoxes.push_back(hipHop);

    sf::Text emo;
    text.setText(emo, otherPixel, "Emo", 40, sf::Color::Black);
    emo.setPosition(width / 2.0f + 125, height / 4.0f + 10);
    textBoxes.push_back(emo);

    sf::Text trapMetal;
    text.setText(trapMetal, otherPixel, "Trap Metal", 40, sf::Color::Black);
    trapMetal.setPosition(width / 2.0f + 350, height / 4.0f + 10);
    textBoxes.push_back(trapMetal);

    sf::Text rap;
    text.setText(rap, otherPixel, "Rap", 40, sf::Color::Black);
    rap.setPosition(width / 9.0f - 50, height / 3.0f - 20);
    textBoxes.push_back(rap);

    sf::Text underGround;
    text.setText(underGround, otherPixel, "Underground", 40, sf::Color::Black);
    underGround.setPosition(width / 3.0f - 50, height / 3.0f - 20);
    textBoxes.push_back(underGround);

    sf::Text rnb;
    text.setText(rnb, otherPixel, "RNB", 40, sf::Color::Black);
    rnb.setPosition(width / 2.0f + 125, height / 3.0f - 20);
    textBoxes.push_back(rnb);

    sf::Text pop;
    text.setText(pop, otherPixel, "Pop", 40, sf::Color::Black);
    pop.setPosition(width / 2.0f + 355, height / 3.0f - 20);
    textBoxes.push_back(pop);

    sf::RectangleShape outline;
    outline.setFillColor(sf::Color::Transparent);
    outline.setOutlineThickness(4.f);
    outline.setOutlineColor(sf::Color::Green);

    sf::Sprite headphones;
    headphones.setScale(.20f, .20f);
    headphones.setTexture(TextureManager::GetTexture("headphones"));
    headphones.setPosition(width / 8.0f - 30, height / 5.0f - 175);

    while (window.isOpen()) {
        sf::Event event;
        while (window.pollEvent(event)) {
            if (event.type == sf::Event::Closed)
                window.close();
        }
        window.clear(lightGreen);
        window.draw(titleText);
        window.draw(genreText);
        for (auto i: textBoxes) {
            if (i.getGlobalBounds().contains(static_cast<sf::Vector2f>(sf::Mouse::getPosition(window)))) {
                outline.setSize(sf::Vector2f(i.getGlobalBounds().width + 20.f, i.getGlobalBounds().height + 20.f));
                outline.setPosition(i.getPosition() - sf::Vector2f(4.f, 4.f));
                window.draw(i);
                window.draw(outline);
            }
            else {
                window.draw(i);
            }
        }
        window.draw(headphones);
        window.display();
    }

    return 0;
}
